platform: X
topic: Twitter-API-Enterprise
subtopic: Engagement API
file_path: /home/bhuang/nlp/rag-race-challenge2-2024/platform-docs-versions/X_Twitter-API-Enterprise/Engagement API.md
url: https://developer.twitter.com/en/docs/twitter-api/enterprise/engagement-api/api-reference/post-insights-engagement


## POST /insights/engagement/historical [¶](#post-insights-engagement-historical- "Permalink to this headline")

The historical endpoint provides the ability to retrieve impressions and engagements for a collection of up to 25 Tweets for any period up to 4 weeks in duration. Currently, data older than September 1, 2014 cannot be requested from the API. The historical endpoint also provides the ability to request metrics for all supported individual metrics. For the full list of supported metrics see [Metric Availability](https://developer.twitter.com/en/docs/metrics/get-tweet-engagement/overview.html#EngagementTypes).

|     |     |
| --- | --- |
| **Request Method** | HTTP POST |
| **URL** | `https://data-api.twitter.com/insights/engagement/historical` |
| **Content Type** | `application/json` |
| **Compression** | Gzip. To make a request using Gzip compression, send an Accept-Encoding header in the connection request.  <br>The header should look like the following:  <br>  <br>`Accept-Encoding: gzip` |
| **POST Format** | Requests can be sent as a POST request where the body is a JSON object containing a collection of Tweet IDs and a desired grouping. The POST is formatted as an array with a `tweets`, `engagements`, and `groupings` object. Each request can have a maximum of 25 Tweet IDs. Each request can be specified with a custom Start and End date up to four weeks in duration.  <br>  <br><br>  {<br>    "tweet\_ids": \[<br>       "Tweet ID 1",<br>       "Tweet ID 2",<br>       "Tweet ID 3"<br>    \],<br>      "engagement\_types": \[<br>        "impressions",<br>        "engagements",<br>        "url\_clicks",<br>        "detail\_expands"<br>    \],<br>    "groupings": {<br>      "grouping name": {<br>        "group\_by": \[<br>          "tweet.id",<br>          "engagement.type",<br>          "engagement.hour"<br>        \]<br>      }<br>    }<br>  } |
| **Start and End Date** | A custom start and end date can be specified with the `start` and `end` values as part of the request. You must specify a start and end date that are not longer than 4 weeks in duration. The oldest possible start date at this time is September 1, 2014. End dates in the future are not supported. If no Start and End date are supplied, the API will default to the immediately previous 4 weeks.  <br>  <br>The lowest granularity that data can be returned from the Engagement API is by hour. For any requests made with Start or End values that do not fall directly on an hourly boundary, requests will default to the nearest inclusive hour. For instance, a request with "start":"2015-07-01T12:24:00Z" and "end":"2015-07-10T08:37:00Z" will default to "start":"2015-07-01T12:00:00Z","end":"2015-07-10T09:00:00Z". |
| **Tweet IDs** | An array that includes the Tweet IDs for the Tweets to be queried for engagement data. Please note that you are only able to requests data for Tweets that were created by the authenticating @handle. The 4 week historical endpoint supports up to a maximum of 25 Tweets per request, and Tweet IDs must be represented as strings. |
| **Engagement Types** | n array that includes the types of engagement metrics to be queried.  <br>  <br>For the 4 week historical endpoint, `impressions`, `engagements`, and all individual engagement types are supported metrics. For the full list of supported engagement metrics see [Engagement Data](https://developer.twitter.com/en/docs/metrics/get-tweet-engagement/overview.html#AvailableData).  <br>  <br>\*\*Note:\*\*Currently there are three metrics that will display as zero for queries made before September 15, 2015: `favorites`, `replies`, and `retweets`. |
| **Groupings** | Results from the Engagement API can be returned in different groups to best fit your needs. You can include a maximum of 3 groupings per request.  <br>  <br>For each grouping, you may define a custom grouping name to make it easier to refer to this grouping type in your application. Once you have defined a grouping name, you can choose to group by one or more of the following values:  <br>`tweet.id`  <br>`engagement.type`  <br>`engagement.day`  <br>`engagement.hour`  <br>Groupings are honored serially, so that you can change the desired result format by changing the order of your group\_by values. An example grouping that will show metrics separated by Tweet ID, metric type, and looks like:<br><br>  "groupings": {<br>    "my grouping name": {<br>      "group\_by": \[<br>        "tweet.id",<br>        "engagement.type",<br>        "engagement.day"<br>      \]<br>    }<br>  }<br><br>  <br>Groupings that have 4 `group_by` items are only valid if they use one of the following two orders. Requests that have 4 `group_by` items in a single grouping that are not one of the following will return an error. Additionally, only one grouping with 4 `group_by` items will be allowed per request.  <br><br>"group\_by": \[<br>    "tweet.id",<br>    "engagement.type",<br>    "engagement.day",<br>    "engagement.hour"<br>  \]<br><br>"group\_by": \[<br>    "engagement.type",<br>    "tweet.id",<br>    "engagement.day",<br>    "engagement.hour"<br>  \] |
| **POST Size Limit** | Requests can be made for a maximum of 25 Tweet IDs at a time. |
| **Response Format** | JSON. The header of your request should specify JSON format for the response. |
| **Rate Limit** | You will be rate limited by minute, as specified in your contract according to your level of access. |
| **Example Request** | curl -XPOST "https://data-api.twitter.com/insights/engagement/historical" <br>  -H 'Accept-Encoding: gzip' <br>  -H 'Authorization OAuth oauth\_consumer\_key="consumer-key-for-app",oauth\_nonce="generated-nonce",oauth\_signature="generated-signature",oauth\_signature\_method="HMAC-SHA1", oauth\_timestamp="generated-timestamp",oauth\_token="access-token-for-authed-user", oauth\_version="1.0"' <br>  -d '{<br>    "start": "2015-08-01",<br>    "end": "2015-08-15",<br>    "tweet\_ids": \[<br>       "123456789",<br>       "223456789",<br>       "323456789"<br>    \],<br>      "engagement\_types": \[<br>        "impressions",<br>        "engagements",<br>        "url\_clicks",<br>        "detail\_expands"<br>    \],<br>    "groupings": {<br>      "types-by-tweet-id": {<br>        "group\_by": \[<br>          "tweet.id",<br>          "engagement.type"<br>        \]<br>      }<br>    }<br>  }' |
| **Example Response** | {<br>    "start": "2015-08-01T00:00:00Z",<br>    "end": "2015-08-15T00:00:00Z",<br>    "types-by-tweet-id": {<br>      "123456789": {<br>        "impressions": "0",<br>        "engagements": "0",<br>        "url\_clicks": "0",<br>        "detail\_expands": "0"<br>      },<br>      "223456789": {<br>        "impressions": "788",<br>        "engagements": "134",<br>        "url\_clicks": "30",<br>        "detail\_expands": "1323"<br>      },<br>      "323456789": {<br>        "impressions": "4",<br>        "engagements": "0",<br>        "url\_clicks": "2",<br>        "detail\_expands": "0"<br>      }<br>    }<br>  } |
| **Unavailable Tweet IDs** | For queries that include Tweet IDs that have been made unavailable (e.g., have been deleted), appropriate data will be returned for all available Tweet IDs, and unavailable Tweet IDs will be referenced in an array called `unavailable_tweet_ids`. For example:<br><br>{<br>    "start": "2015-11-17T22:00:00Z",<br>    "end": "2015-11-19T02:27:50Z",<br>    "unavailable\_tweet\_ids": \[<br>        "323456789"<br>    \],<br>    "group1": {<br>     "423456789": {<br>      "favorites": "67",<br>      "replies": "8",<br>      "retweets": 26<br>     }<br>    }<br>  } |